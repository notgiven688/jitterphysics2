<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Constraints | Jitter2 </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Constraints | Jitter2 ">
      
      
      <link rel="icon" href="../../favicon.ico">
      <link rel="stylesheet" href="../../public/docfx.min.css">
      <link rel="stylesheet" href="../../public/main.css">
      <meta name="docfx:navrel" content="../../toc.html">
      <meta name="docfx:tocrel" content="../toc.html">
      
      <meta name="docfx:rel" content="../../">
      
      
      <meta name="docfx:docurl" content="https://github.com/notgiven688/jitterphysics2/blob/main/docfx/docs/documentation/constraints.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../index.html">
            <img id="logo" class="svg" src="../../logo.png" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="constraints">Constraints</h1>

<p>Constraints restrict degrees of freedom of rigid bodies.
In Jitter2, constraints always act between two bodies.
A joint is a collection of multiple constraints, so it may act on multiple bodies.</p>
<h2 id="degrees-of-freedom">Degrees of Freedom</h2>
<p>A rigid body has 6 degrees of freedom (DOF): 3 translational and 3 rotational.
Constraints remove one or more of these degrees of freedom.</p>
<table>
<thead>
<tr>
<th>Constraint</th>
<th>Removed DOF</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>BallSocket</code></td>
<td>3 translational</td>
<td>Anchors a point on each body together</td>
</tr>
<tr>
<td><code>FixedAngle</code></td>
<td>3 rotational</td>
<td>Locks relative orientation between bodies</td>
</tr>
<tr>
<td><code>HingeAngle</code></td>
<td>2 rotational</td>
<td>Allows rotation around a single axis only</td>
</tr>
<tr>
<td><code>PointOnLine</code></td>
<td>2 translational</td>
<td>Constrains a point to a line (1 DOF with limit)</td>
</tr>
<tr>
<td><code>PointOnPlane</code></td>
<td>1 translational</td>
<td>Constrains a point to a plane</td>
</tr>
<tr>
<td><code>DistanceLimit</code></td>
<td>1 translational</td>
<td>Maintains distance between anchor points</td>
</tr>
<tr>
<td><code>TwistAngle</code></td>
<td>1 rotational</td>
<td>Limits relative twist around an axis</td>
</tr>
<tr>
<td><code>ConeLimit</code></td>
<td>1 rotational</td>
<td>Limits angular tilt between two axes</td>
</tr>
<tr>
<td><code>AngularMotor</code></td>
<td>—</td>
<td>Drives angular velocity (does not remove DOF)</td>
</tr>
<tr>
<td><code>LinearMotor</code></td>
<td>—</td>
<td>Drives linear velocity (does not remove DOF)</td>
</tr>
<tr>
<td><code>SpringConstraint</code></td>
<td>1 translational</td>
<td>Spring-like force along the anchor connection</td>
</tr>
</tbody>
</table>
<h2 id="joints">Joints</h2>
<p>Joints are combinations of constraints for common use cases:</p>
<table>
<thead>
<tr>
<th>Joint</th>
<th>Constraints used</th>
<th>Remaining DOF</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>HingeJoint</code></td>
<td><code>BallSocket</code> + <code>HingeAngle</code> (+ optional <code>AngularMotor</code>)</td>
<td>1 rotational</td>
</tr>
<tr>
<td><code>PrismaticJoint</code></td>
<td><code>PointOnLine</code> + <code>FixedAngle</code> or <code>HingeAngle</code> (+ optional <code>LinearMotor</code>)</td>
<td>1 translational</td>
</tr>
<tr>
<td><code>UniversalJoint</code></td>
<td><code>BallSocket</code> + <code>TwistAngle</code> (+ optional <code>AngularMotor</code>)</td>
<td>2 rotational</td>
</tr>
<tr>
<td><code>WeldJoint</code></td>
<td><code>BallSocket</code> + <code>FixedAngle</code></td>
<td>0 (fully locked)</td>
</tr>
</tbody>
</table>
<h2 id="creating-constraints">Creating constraints</h2>
<p>Constraints are instantiated through a create method in the world class:</p>
<pre><code class="lang-cs">var constraint = world.CreateConstraint&lt;ConstraintType&gt;(body1, body2);
</code></pre>
<p>Jitter2 allocates and assigns unmanaged memory to constraints internally, allowing them to be used like regular classes.
The solver interacts with unmanaged memory structures of type <code>ConstraintData</code> (256 bytes) or <code>SmallConstraintData</code> (128 bytes), depending on whether <code>constraint.IsSmallConstraint</code> is set.
Small constraints are designed for simpler constraints with a smaller memory footprint, such as spring constraints for soft bodies.</p>
<div class="CAUTION">
<h5>Caution</h5>
<p><strong>Constraint Initialization</strong>
For all default constraints, <code>constraint.Initialize</code> must be called once after <code>world.CreateConstraint</code>.</p>
</div>
<h3 id="world-space-initialization">World space initialization</h3>
<p>Constraints are initialized using world space coordinates (anchor points, axes).
The bodies should be positioned in a valid configuration before calling <code>Initialize</code>.
The constraint then computes and stores local reference frames for each body based on their current poses.
This means the constraint &quot;remembers&quot; the initial setup and will try to maintain it during simulation.</p>
<h3 id="example-hinge-joint">Example: Hinge joint</h3>
<p>A swinging door can be implemented by combining two constraints: A <code>HingeAngle</code> constraint which removes two degrees of angular freedom (the bodies can only rotate around a single axis), and a <code>BallSocket</code> constraint removing all three translational degrees of freedom:</p>
<pre><code class="lang-cs">var hingeAngle = world.CreateConstraint&lt;HingeAngle&gt;(body1, body2);
hingeAngle.Initialize(hingeAxis, AngularLimit.Full);

var ballSocket = world.CreateConstraint&lt;BallSocket&gt;(body1, body2);
ballSocket.Initialize(hingeCenter);
</code></pre>
<p>Alternatively, the <code>HingeJoint</code> can be used for convenience:</p>
<pre><code class="lang-cs">var hinge = new HingeJoint(world, body1, body2, hingeCenter, hingeAxis);
</code></pre>
<h3 id="fixed-constraints">Fixed constraints</h3>
<p>To constrain a rigid body relative to world space, use <code>world.NullBody</code> as one of the bodies.
For example, to keep a capsule upright:</p>
<pre><code class="lang-cs">var upright = world.CreateConstraint&lt;HingeAngle&gt;(capsule, world.NullBody);
upright.Initialize(JVector.UnitY, AngularLimit.Full);
</code></pre>
<h3 id="softness-and-bias">Softness and Bias</h3>
<p>For most constraints, softness and bias values can be set.
These values define how strictly the constraint limits are enforced.
Softer constraints may improve simulation stability but do not fully enforce the constraint limits.
The softness and bias parameters can be tweaked for optimal results.
Better constraint behavior can also be achieved by sub-stepping, see <a href="world.html">World</a>.</p>
<h3 id="enabledisable-constraints">Enable/Disable constraints</h3>
<p>Constraints can be temporarily enabled or disabled using <code>constraint.IsEnabled</code>.</p>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/notgiven688/jitterphysics2/blob/main/docfx/docs/documentation/constraints.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
